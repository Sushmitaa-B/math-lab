<!DOCTYPE html>
<html>
<head>
    <title>Math Web App</title>
</head>
<body>
    <h2>Math Lab - Arithmetic</h2>
    <input id="num1" placeholder="Enter A">
    <input id="num2" placeholder="Enter B">
    <select id="op">
        <option value="add">Addition</option>
        <option value="subtract">Subtraction</option>
        <option value="multiply">Multiplication</option>
        <option value="divide">Division</option>
    </select>
    <button onclick="calculate()">Calculate</button>
    <p id="result"></p>

    <h2>Fibonacci Curve</h2>
    <input id="n" placeholder="Enter N" value="10">
    <button onclick="drawFibonacci()">Draw</button>
    <canvas id="fibCanvas" width="600" height="600" style="border:1px solid black"></canvas>

    <script>
        const backend = window.location.origin;

        function calculate() {
            const a = document.getElementById('num1').value;
            const b = document.getElementById('num2').value;
            const op = document.getElementById('op').value;
            fetch(`${backend}/${op}?a=${a}&b=${b}`)
                .then(res => res.text())
                .then(result => document.getElementById('result').innerText = result);
        }

        function drawFibonacci() {
            const n = document.getElementById('n').value;
            fetch(`${backend}/fibonacci?n=${n}`)
                .then(res => res.json())
                .then(segments => {
                    const canvas = document.getElementById('fibCanvas');
                    const ctx = canvas.getContext('2d');
                    ctx.clearRect(0, 0, canvas.width, canvas.height);

                    segments.forEach((seg, idx) => {
                        ctx.beginPath();
                        ctx.strokeStyle = ["blue","red","green","orange","purple"][idx%5];
                        for(let i=0; i<seg.X.length; i++){
                            let x = seg.X[i]*5 + canvas.width/2;
                            let y = canvas.height/2 - seg.Y[i]*5;
                            if(i==0) ctx.moveTo(x,y);
                            else ctx.lineTo(x,y);
                        }
                        ctx.stroke();
                    });
                });
        }
    </script>
</body>
</html>
