<!DOCTYPE html>
<html>
<head>
    <title>ðŸ§® SS AI Lab's Mathematical Assistant</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to right, #FFDEE9, #B5FFFC);
            color: #333;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: rgba(255, 255, 255, 0.85);
            text-align: center;
            padding: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h2 { color: #444; }

        .container {
            max-width: 800px;
            margin: 30px auto;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        input, select {
            padding: 10px;
            margin: 10px 5px 20px 0;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 16px;
            background-color: #fef7f7;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background-color: #A3D2CA;
            color: #333;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover { background-color: #FFE0AC; }

        #result { font-size: 20px; font-weight: bold; margin-top: 15px; }

        canvas {
            display: block;
            margin: 20px auto;
            border: 2px solid #ccc;
            border-radius: 12px;
            background-color: #FFF1F3;
        }

        footer { text-align: center; padding: 20px; font-size: 14px; color: #555; }
    </style>
</head>
<body>
    <header>
        <h1>ðŸ§® SS AI Lab's Mathematical Assistant</h1>
    </header>

    <div class="container">
        <h2>Arithmetic Operations</h2>
        <input id="num1" placeholder="Enter A">
        <input id="num2" placeholder="Enter B">
        <select id="op">
            <option value="add">Addition</option>
            <option value="subtract">Subtraction</option>
            <option value="multiply">Multiplication</option>
            <option value="divide">Division</option>
        </select>
        <button onclick="calculate()">Calculate</button>
        <p id="result"></p>

        <h2>Fibonacci Spiral</h2>
        <input id="n" placeholder="Enter N" value="10">
        <button onclick="drawFibonacci()">Draw</button>
        <canvas id="fibCanvas" width="600" height="600"></canvas>
    </div>

    <footer>
        Math Lab Web App &copy; 2025
    </footer>

    <script>
        const backend = window.location.origin;

        function calculate() {
            const a = document.getElementById('num1').value;
            const b = document.getElementById('num2').value;
            const op = document.getElementById('op').value;
            fetch(`${backend}/${op}?a=${a}&b=${b}`)
                .then(res => res.text())
                .then(result => document.getElementById('result').innerText = result);
        }

        function drawFibonacci() {
            const n = document.getElementById('n').value;
            fetch(`${backend}/fibonacci?n=${n}`)
                .then(res => res.json())
                .then(segments => {
                    const canvas = document.getElementById('fibCanvas');
                    const ctx = canvas.getContext('2d');
                    ctx.clearRect(0, 0, canvas.width, canvas.height);

                    const centerX = canvas.width / 2;
                    const centerY = canvas.height / 2;
                    const scale = 5; // pixels per Fibonacci unit
                    const tickStep = 50; // pixels per tick

                    // Draw axes
                    ctx.beginPath();
                    ctx.strokeStyle = "#A3D2CA"; // pastel green axes
                    ctx.lineWidth = 1;
                    ctx.moveTo(centerX, 0);
                    ctx.lineTo(centerX, canvas.height); // Y axis
                    ctx.moveTo(0, centerY);
                    ctx.lineTo(canvas.width, centerY); // X axis
                    ctx.stroke();

                    // Draw tick marks and units
                    ctx.fillStyle = "#333";
                    ctx.font = "12px Arial";

                    // X-axis ticks
                    for (let x = centerX; x < canvas.width; x += tickStep) {
                        ctx.beginPath();
                        ctx.moveTo(x, centerY-5);
                        ctx.lineTo(x, centerY+5);
                        ctx.stroke();
                        ctx.fillText(Math.round((x - centerX)/scale), x-10, centerY+20);
                    }
                    for (let x = centerX; x > 0; x -= tickStep) {
                        ctx.beginPath();
                        ctx.moveTo(x, centerY-5);
                        ctx.lineTo(x, centerY+5);
                        ctx.stroke();
                        ctx.fillText(Math.round((x - centerX)/scale), x-10, centerY+20);
                    }

                    // Y-axis ticks
                    for (let y = centerY; y < canvas.height; y += tickStep) {
                        ctx.beginPath();
                        ctx.moveTo(centerX-5, y);
                        ctx.lineTo(centerX+5, y);
                        ctx.stroke();
                        ctx.fillText(Math.round((centerY - y)/scale), centerX+10, y+5);
                    }
                    for (let y = centerY; y > 0; y -= tickStep) {
                        ctx.beginPath();
                        ctx.moveTo(centerX-5, y);
                        ctx.lineTo(centerX+5, y);
                        ctx.stroke();
                        ctx.fillText(Math.round((centerY - y)/scale), centerX+10, y+5);
                    }

                    // Draw Fibonacci spiral in blue
                    ctx.strokeStyle = "#0000FF";
                    ctx.lineWidth = 2;
                    segments.forEach(seg => {
                        ctx.beginPath();
                        for(let i=0; i<seg.X.length; i++){
                            let x = seg.X[i]*scale + centerX;
                            let y = centerY - seg.Y[i]*scale;
                            if(i===0) ctx.moveTo(x, y);
                            else ctx.lineTo(x, y);
                        }
                        ctx.stroke();
                    });
                });
        }
    </script>
</body>
</html>
